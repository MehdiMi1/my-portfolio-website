{% extends 'base.html' %}
{% set t = translations[lang] %}

{% block title %}{{ meta_title }}{% endblock %}
{% block meta_description %}{{ meta_description }}{% endblock %}

{% block content %}
    <section class="hero">
        <div class="container hero-content">
            <div class="hero-text">
                <h1 class="reveal-on-scroll">{{ t.hero_title }}</h1>
                <p class="reveal-on-scroll" style="transition-delay: 0.2s;">{{ t.hero_subtitle }}</p>
                <div class="hero-buttons">
                    <a href="{{ url_for('projects', lang=lang) }}" class="btn btn-primary">{{ t.btn_view_projects }} <i class="fa-solid fa-arrow-left"></i></a>
                    <a href="{{ url_for('contact', lang=lang) }}" class="btn btn-secondary">{{ t.btn_free_consult }}</a>
                </div>
            </div>
            <div class="hero-image">
                <img src="{{ url_for('static', filename='images/hero-collaborative-tech-team.jpg') }}" alt="{{ t.hero_title }}">
            </div>
        </div>
    </section>

    <section id="features" class="features">
        <div class="container">
            <h2 class="section-title reveal-on-scroll">{{ t.expertise_title }}</h2>
            <div class="features-grid">
                <div class="feature-card reveal-on-scroll">
                    <div class="feature-icon"><i class="fa-solid fa-pen-ruler"></i></div>
                    <h3>{{ t.expertise_1_title }}</h3>
                    <p>{{ t.expertise_1_desc }}</p>
                </div>
                <div class="feature-card reveal-on-scroll" style="transition-delay: 0.2s;">
                    <div class="feature-icon"><i class="fa-solid fa-code"></i></div>
                    <h3>{{ t.expertise_2_title }}</h3>
                    <p>{{ t.expertise_2_desc }}</p>
                </div>
                <div class="feature-card reveal-on-scroll" style="transition-delay: 0.4s;">
                    <div class="feature-icon"><i class="fa-solid fa-rocket"></i></div>
                    <h3>{{ t.expertise_3_title }}</h3>
                    <p>{{ t.expertise_3_desc }}</p>
                </div>
            </div>
        </div>
    </section>
    
    {% if featured_project %}
    <section class="featured-project-section">
        <div class="container">
            <h2 class="section-title reveal-on-scroll">{% if lang == 'fa' %}پروژه منتخب{% else %}Featured Project{% endif %}</h2>
            <div class="project-card-featured reveal-on-scroll">
                <div class="project-image">
                    <img src="{{ url_for('static', filename='images/projects/' + featured_project.image_file) if featured_project.image_file else '' }}" alt="{% if lang == 'fa' %}{{ featured_project.title_fa }}{% else %}{{ featured_project.title_en }}{% endif %}">
                </div>
                <div class="project-content">
                    <h3>{% if lang == 'fa' %}{{ featured_project.title_fa }}{% elif lang == 'en' %}{{ featured_project.title_en }}{% elif lang == 'ar' %}{{ featured_project.title_ar }}{% else %}{{ featured_project.title_de }}{% endif %}</h3>
                    <p>{% if lang == 'fa' %}{{ featured_project.description_fa }}{% elif lang == 'en' %}{{ featured_project.description_en }}{% elif lang == 'ar' %}{{ featured_project.description_ar }}{% else %}{{ featured_project.description_de }}{% endif %}</p>
                    {% set tags = featured_project.tags_fa if lang == 'fa' else featured_project.tags_en if lang == 'en' else featured_project.tags_ar if lang == 'ar' else featured_project.tags_de %}
                    {% if tags %}
                    <div class="project-tags">
                        {% for tag in tags.split(',') %}
                            <span>{{ tag.strip() }}</span>
                        {% endfor %}
                    </div>
                    {% endif %}
                    <a href="{{ url_for('project_detail', lang=lang, slug=featured_project.slug) }}" class="btn btn-secondary">{% if lang == 'fa' %}مشاهده جزئیات پروژه{% else %}View Project Details{% endif %}</a>
                </div>
            </div>
        </div>
    </section>
    {% endif %}

    <section class="process-section">
      <div class="container">
        <h2 class="section-title reveal-on-scroll">{{ t.process_title }}</h2>
        <div class="process-steps">
            <div class="step-item reveal-on-scroll">
                <div class="step-icon"><i class="fa-solid fa-magnifying-glass"></i></div>
                <div class="step-number">1</div>
                <h3 class="step-title">{{ t.process_step1_title }}</h3>
                <p class="step-description">{{ t.process_step1_desc }}</p>
            </div>
            <div class="step-item reveal-on-scroll" style="transition-delay: 0.2s;">
                <div class="step-icon"><i class="fa-solid fa-drafting-compass"></i></div>
                <div class="step-number">2</div>
                <h3 class="step-title">{{ t.process_step2_title }}</h3>
                <p class="step-description">{{ t.process_step2_desc }}</p>
            </div>
            <div class="step-item reveal-on-scroll" style="transition-delay: 0.4s;">
                <div class="step-icon"><i class="fa-solid fa-laptop-code"></i></div>
                <div class="step-number">3</div>
                <h3 class="step-title">{{ t.process_step3_title }}</h3>
                <p class="step-description">{{ t.process_step3_desc }}</p>
            </div>
            <div class="step-item reveal-on-scroll" style="transition-delay: 0.6s;">
                <div class="step-icon"><i class="fa-solid fa-vial-circle-check"></i></div>
                <div class="step-number">4</div>
                <h3 class="step-title">{{ t.process_step4_title }}</h3>
                <p class="step-description">{{ t.process_step4_desc }}</p>
            </div>
             <div class="step-item reveal-on-scroll" style="transition-delay: 0.8s;">
                <div class="step-icon"><i class="fa-solid fa-rocket"></i></div>
                <div class="step-number">5</div>
                <h3 class="step-title">{{ t.process_step5_title }}</h3>
                <p class="step-description">{{ t.process_step5_desc }}</p>
            </div>
        </div>
      </div>
    </section>

    <section class="latest-blog-section">
      <div class="container">
        <h2 class="section-title reveal-on-scroll">{{ t.latest_blog_title }}</h2>
        <div class="blog-grid-preview">
            {% for post in latest_posts %}
            <div class="post-card reveal-on-scroll">
                <a href="{{ url_for('post_detail', lang=lang, slug=post.slug) }}" class="post-image-link">
                    <img src="{{ url_for('static', filename='images/blog/' + post.image_file) if post.image_file else '' }}" alt="{% if lang == 'fa' %}{{ post.title_fa }}{% elif lang == 'en' %}{{ post.title_en }}{% elif lang == 'ar' %}{{ post.title_ar }}{% else %}{{ post.title_de }}{% endif %}">
                </a>
                <div class="post-content">
                    <span class="post-category">{% if lang == 'fa' %}{{ post.category_fa }}{% elif lang == 'en' %}{{ post.category_en }}{% elif lang == 'ar' %}{{ post.category_ar }}{% else %}{{ post.category_de }}{% endif %}</span>
                    <h3><a href="{{ url_for('post_detail', lang=lang, slug=post.slug) }}">{% if lang == 'fa' %}{{ post.title_fa }}{% elif lang == 'en' %}{{ post.title_en }}{% elif lang == 'ar' %}{{ post.title_ar }}{% else %}{{ post.title_de }}{% endif %}</a></h3>
                    {% set content = post.content_fa if lang == 'fa' else post.content_en if lang == 'en' else post.content_ar if lang == 'ar' else post.content_de %}
                    <p>{{ (content or '') | striptags | truncate(100) }}</p>
                    <a href="{{ url_for('post_detail', lang=lang, slug=post.slug) }}" class="read-more">
                        {{ t.blog_read_more }}
                        <i class="fa fa-arrow-left"></i>
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="section-cta reveal-on-scroll">
            <a href="{{ url_for('blog', lang=lang) }}" class="btn btn-secondary">
                {{ t.view_all_articles }}
            </a>
        </div>
      </div>
    </section>

    <section class="lead-magnet-section-new">
        <div class="container">
            <div class="lead-magnet-grid">
                <div class="lead-magnet-text reveal-on-scroll">
                    <div class="lead-magnet-icon"><i class="fa-solid fa-gem"></i></div>
                    <h2>{{ t.lead_magnet_new_title }}</h2>
                    <p>{{ t.lead_magnet_new_desc }}</p>
                    <a href="{{ url_for('contact', lang=lang) }}" class="btn btn-secondary" style="margin-top: 20px;">
                        {{ t.lead_magnet_new_cta }}
                    </a>
                </div>
                <div class="lead-magnet-image-container reveal-on-scroll" style="transition-delay: 0.2s;">
                    <img src="{{ url_for('static', filename='images/checklist-mockup.png') }}" alt="Checklist Mockup" class="lead-magnet-image">
                </div>
            </div>
        </div>
    </section>
{% endblock %}