{% extends 'base.html' %}
{% set t = translations[lang] %}

{% block title %}{{ meta_title }}{% endblock %}
{% block meta_description %}{{ meta_description }}{% endblock %}

{% block content %}
<section class="page-header">
    <div class="container">
        <h1 class="reveal-on-scroll">{{ t.stories_header_title }}</h1>
        <p class="reveal-on-scroll" style="transition-delay: 0.2s;">{{ t.stories_header_subtitle }}</p>
    </div>
</section>

<section class="features" style="padding: 60px 0 0 0; background-color: var(--bg-dark);">
    <div class="container">
        <div class="blog-filters reveal-on-scroll" id="story-filters">
            <button class="filter-btn active" data-filter="all">
                {{ t.blog_all_categories }}
            </button>
            {% for category in categories %}
            <button class="filter-btn" data-filter="{{ category }}">{{ category }}</button>
            {% endfor %}
        </div>
    </div>
</section>

<div class="stories-container">
    {% for story in stories %}
    <section class="story-parallax-item" data-category="{{ getattr(story, 'category_' + lang) }}">
        <div class="parallax-bg" style="background-image: url('{{ url_for('static', filename='images/stories/' + story.image_file) if story.image_file else '' }}');"></div>
        <div class="story-content container">
            <h2 class="story-title">{{ getattr(story, 'title_' + lang) }}</h2>
            <p class="story-excerpt">{{ getattr(story, 'excerpt_' + lang) }}</p>
            <a href="{{ url_for('story_detail', lang=lang, slug=story.slug) }}" class="btn btn-primary">
                {{ t.stories_continue_reading }}
            </a>
        </div>
    </section>
    {% else %}
    <section class="page-header" style="background-color: transparent;">
        <div class="container">
            <p>{{ t.stories_no_stories_yet }}</p>
        </div>
    </section>
    {% endfor %}
    
    <div class="no-results-message" style="display: none; text-align: center; padding: 80px 20px; color: var(--text-muted);">
        <h2>{% if lang == 'fa' %}داستانی در این دسته‌بندی یافت نشد.{% elif lang == 'en' %}No stories found in this category.{% elif lang == 'ar' %}لم يتم العثور على قصص في هذه الفئة.{% else %}Keine Geschichten in dieser Kategorie gefunden.{% endif %}</h2>
    </div>
</div>
{% endblock %}